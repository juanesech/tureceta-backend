box: openjdk:8-jdk

build:
  steps:
    - java/gradle:
      task: clean build -x test
      cache_project_cache: true

test:
  steps:
   - script:
      name: "Code Coverage"
      code: |
          env
          wget $CODACY_JAR
          ./gradlew clean test jacocoTestReport
          java -jar codacy-coverage-reporter-${COVER_VERSION}-assembly.jar report -l Java -r $JACOCO_REPORT
      cache_project_cache: true
