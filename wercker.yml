box: openjdk:8-jdk


build:
  steps:
    - java/gradle:
      task: build -x test
      cache_project_cache: true

test:
  steps:
    - java/gradle:
      task: test
      cache_project_cache: true
    - script:
      name: "Code Coverage"
      code: |
          env
          wget $CODACY_JAR
          java -jar codacy-coverage-reporter-${COVER_VERSION}-assembly.jar report -l Java -r build/jacoco/test.exec
